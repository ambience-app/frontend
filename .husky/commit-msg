# #!/usr/bin/env sh
# . "$(dirname -- "$0")/_/husky.sh"

# Basic Conventional Commits check (type: scope optional: subject)
# Examples: feat: add new feature | fix(ui): correct button color
commit_msg_file="$1"
commit_msg=$(sed -n '1p' "$commit_msg_file")

pattern='^(build|chore|ci|docs|feat|fix|perf|refactor|revert|style|test)(\(.+\))?: .+'

if ! printf "%s" "$commit_msg" | grep -Eq "$pattern"; then
  echo "\nâœ– Invalid commit message format.\n"
  echo "Expected: <type>(optional scope): <subject>"
  echo "Allowed types: build|chore|ci|docs|feat|fix|perf|refactor|revert|style|test"
  echo "Example: feat(wallet): add Plausible tracking"
  exit 1
fi
